<!-- https://clickhouse.com/docs/en/operations/tips#using-less-than-16gb-of-ram -->
<clickhouse>

	<!-- Global memory limit - leave some for OS -->
	<max_server_memory_usage>6442450944</max_server_memory_usage> <!-- 6GB -->
	<max_server_memory_usage_to_ram_ratio>0.75</max_server_memory_usage_to_ram_ratio> <!-- 75% of 8GB = 6GB -->

	<!-- https://clickhouse.com/docs/en/operations/server-configuration-parameters/settings#mark_cache_size -->
	<mark_cache_size>524288000</mark_cache_size>

	<profile>
		<default>
			<!-- https://clickhouse.com/docs/en/operations/settings/settings#max_threads -->
			<max_threads>1</max_threads>
			<!-- https://clickhouse.com/docs/en/operations/settings/settings#max_block_size -->
			<max_block_size>8192</max_block_size>
			<!-- https://clickhouse.com/docs/en/operations/settings/settings#max_download_threads -->
			<max_download_threads>1</max_download_threads>
			<!-- https://clickhouse.com/docs/en/operations/settings/settings#input_format_parallel_parsing -->
			<input_format_parallel_parsing>0</input_format_parallel_parsing>
			<!-- https://clickhouse.com/docs/en/operations/settings/settings#output_format_parallel_formatting -->
			<output_format_parallel_formatting>0</output_format_parallel_formatting>
		</default>
	</profile>
</clickhouse>